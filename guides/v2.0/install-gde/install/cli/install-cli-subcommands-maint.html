<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>Enable or disable maintenance mode</title>
	<meta name="description" content="Magento 2 Developer's Guide">

	<link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,700,600,300,800' rel='stylesheet' type='text/css'>

	<link rel="stylesheet" href="/css/app.css" />
	<link rel="stylesheet" href="/common/css/override.css" />
	<link rel="canonical" href="//guides/v2.0/install-gde/install/cli/install-cli-subcommands-maint.html">



</head>	
<body>

<header id="nav-main" class="nav-main">

	<!--Top Navigation-->
	<nav role="navigation">
		<!-- <div class="menu-btn">
			<a class="menu-trigger menu-icon" href="#"></a>
		</div> -->
			
		<div id="global-nav">
			<div class="main-site-name">
				<a class="logo pull-left" href="/"> </a>
				<div class="sub-site-name">
					<a href="/"><span>Developer Documentation (2.0)</span></a>
				</div>
			</div>
			
			<div class="right-header">
				<!--
				<div class="sales-login">
					<ul class="menu nav">
						<li class="first last leaf"><a href="https://www.magentocommerce.com/products/customer/account/login">My Account</a></li>
					</ul>
				</div>
				
				
				<div class="head-search" id="head-search">
					<div id="sb-search" class="sb-search">
						<form action="http://www.magentocommerce.com/search/results/">
							<span class="sb-icon-search btn btn-search"></span>
							<input name="q" class="sb-search-input" placeholder="Search docs" type="search" style="display: none;" id="search" />
							<span class="sb-search-submit btn btn-search"></span>
						</form>
					</div>
				</div><!-- #head-search --> 
				
			</div>
			
		</div><!-- #global-nav -->
	</nav>

	<!--Sub Navigation-->
<div id="subnav-wrap">
   <div id="subnav">
      <ul class="menu nav">
         <li class="first expanded">
            <a href="/guides/v2.0/bk-get-started-magento.html">Get Started</a>
            <ul class="menu nav">
               <li class="first leaf"><a href="/guides/v2.0/release-notes/bk-release-notes.html">Release Notes</a></li>
               <li class="leaf"><a href="/guides/v2.0/architecture/bk-architecture.html">Magento Architecture</a></li>
            </ul>
         </li>
         <li class="first expanded">
            <a href="/guides/v2.0/install-gde/bk-install-guide.html">System Administrator</a>
            <ul class="menu nav">
               <li class="first leaf"><a href="/guides/v2.0/install-gde/bk-install-guide.html">Installation Guide</a></li>
               <li class="leaf"><a href="/guides/v2.0/config-guide/bk-config-guide.html">Configuration Guide</a></li>
               <li class="leaf"><a href="/guides/v2.0/migration/bk-migration-guide.html">Migration Guide</a></li>
            </ul>
         </li>
         <li class="first expanded">
            <a href="#">Developers</a>
            <ul class="menu nav">
               <li class="first leaf"><a href="/guides/v2.0/frontend-dev-guide/bk-frontend-dev-guide.html">Frontend Developer Guide</a>
               <li class="first leaf"><a href="/guides/v2.0/ui-library/ui-library-component.html">UI Library Components</a>
   			   <li class="first leaf"><a href="/guides/v2.0/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript Developer Guide</a>
               <div id="divcentered"><img src="/common/images/horiz-line.png"></div></li>
               <li class="first leaf"><a href="/guides/v2.0/extension-dev-guide/bk-extension-dev-guide.html">PHP Developer Guide</a></li>

               <li class="leaf"><a href="/guides/v2.0/mtf/mtf_introduction.html">Magento Testing Framework Guide</a></li>
               <li class="leaf"><a href="/guides/v2.0/pattern-library/bk-pattern.html">Magento Admin Pattern Library</a></li>
               <div id="divcentered"><img src="/common/images/horiz-line.png"></div></li>
               <li class="first leaf"><a href="/guides/v2.0/get-started/bk-get-started-api.html">Get Started with Magento Web APIs</a></li>
               <li class="leaf"><a href="/guides/v2.0/rest/bk-rest.html">REST Reference</a></li>
               <li class="leaf"><a href="/guides/v2.0/soap/bk-soap.html">SOAP Reference</a>
               <div id="divcentered"><img src="/common/images/horiz-line.png"></div></li>
               <li class="leaf"><a href="/guides/v2.0/coding-standards/bk-coding-standards.html">Coding Standards</a></li>


            </ul>
         </li>   
    
         
         
         
         
         <li class="first expanded">
            <a href="/guides/v2.0/contributor-guide/contributing.html">Contributor</a>
            <ul class="menu nav">
               <li class="first leaf"><a href="/guides/v2.0/contributor-guide/contributing.html">Contributor Guide</a></li>
            </ul>
         </li>
      </ul>



   </div> <!--End subnav -->
</div><!--End subnav-wrap -->

	
</header>	


<div id="gl-wrapper">
	
	<!-- #sidemenu -->
	<div id="sidemenu" style="display:none;">
		<a class="menu-trigger menu-close" href="#" title=""></a>
		<div class="h8 site-title">Our Sites</div>
		<ul class="menu nav">
			<li class="first leaf"><a href="http://magento.com/" title="Magento&#039;s Corporate Site" class="active">Magento</a><span class="description">Magento's Corporate Site</span></li>
			<li class="leaf"><a href="http://enterprise.magento.com" title="Enterprise-Class Platform">Enterprise Edition</a><span class="description">Enterprise-Class Platform</span></li>
			<li class="leaf"><a href="http://go.magento.com/" title="Small Business Storefront">Magento Go</a><span class="description">Small Business Storefront</span></li>
			<li class="leaf"><a href="http://www.magentocommerce.com/magento-connect/" title="Extensions Marketplace">Connect</a><span class="description">Extensions Marketplace</span></li>
			<li class="leaf"><a href="http://magento.com/resources/technical" title="Resources for Developers">Developers</a><span class="description">Resources for Developers</span></li>
			<li class="leaf"><a href="http://magento.com/partners/overview" title="Resources for Partners">Partners</a><span class="description">Resources for Partners</span></li>
			<li class="leaf"><a href="http://magento.com/training/overview" title="Courses and Developer Certification">Training</a><span class="description">Courses and Developer Certification</span></li>
			<li class="last leaf"><a href="http://imagine2015.magento.com/" title="Annual Conference">Imagine</a><span class="description">Annual Conference</span></li>
		</ul>
	</div>
	<!-- /#sidemenu -->
	
	<!-- /.main-container -->
	<div id="gl-container" class="main-container">
		<a id="main-content"></a>
		<div class="pane-content">
			<div class="node node-panel">






<!-- page-header -->
<section class="page-intro">
	<div class="container">
		<h1 class="page-heading">Enable or disable maintenance mode</h1>
			
			<a class="improve-page" href="http://github.com/magento/devdocs/blob/develop/guides/v2.0/install-gde/install/install-cli-subcommands-maint.md" target="_blank">Edit this page on GitHub</a>
		
	</div>
</section>

<div class="container">
	<section class="content">
		<div class="content-wrap">
		
		<h4>Contents</h4>

<p>See one of the following sections:</p>

<ul>
  <li><a href="#instgde-install-cli-first">First steps</a></li>
  <li><a href="#instgde-cli-subcommands-maint-prereq">Prerequisites</a></li>
  <li><a href="#instgde-cli-maint">Enable or disable maintenance mode</a></li>
  <li><a href="#instgde-cli-maint-exempt">Maintain the list of exempt IP addresses</a></li>
</ul>

<h2 id="instgde-cli-before">First steps</h2>
<ol><li>Log in to the Magento server as, or switch to, a user who has permissions to write to the Magento file system. One way to do this is to <a href="/guides/v2.0/install-gde/prereq/apache-user.html#install-update-depend-user-switch">switch to the Magento file system owner</a>.</li>
<li>To run Magento commands from any directory, add <code>&lt;your Magento install dir&gt;/bin</code> to your system <code>PATH</code>.<br />
Because shells have differing syntax, consult a reference like <a href="http://unix.stackexchange.com/questions/117467/how-to-permanently-set-environmental-variables" target="_blank">unix.stackexchange.com</a>.<br />
bash shell example for CentOS:<br />
<pre>export PATH=$PATH:/var/www/html/magento2/bin</pre></li></ol>
<div class="bs-callout bs-callout-info" id="info">
<span class="glyphicon-class">
  <p>You can also run the commands in the following ways:</p>
<ul><li><code>cd &lt;your Magento install dir&gt;/bin</code> and run them as <code>./magento &lt;command name&gt;</code></li>
<li><code>php &lt;your Magento install dir&gt;/bin/magento &lt;command name&gt;</code></li></ul>
<p><code>&lt;your Magento install dir&gt;</code> is a subdirectory of your web server's docroot. Need help locating the docroot? Click <a href="/guides/v2.0/install-gde/basics/basics_docroot.html">here</a>.</p></span>
</div>

<p>In addition to the command arguments discussed here, see <a href="/guides/v2.0/install-gde/install/cli/install-cli-subcommands.html#instgde-cli-subcommands-common">Common arguments</a>.</p>

<h2 id="instgde-cli-subcommands-maint-prereq">Prerequisites</h2>
<p>Before you use this command, you must <a href="/guides/v2.0/install-gde/install/cli/install-cli-install.html">install the Magento software</a>.</p>

<h2 id="instgde-cli-maint">Enable or disable maintenance mode</h2>
<p>Magento uses <em>maintenance mode</em> to disable bootstrapping; for example, while youâ€™re maintaining, upgrading, or reconfiguring your site. </p>

<p>Magento detects maintenance mode as follows:</p>

<ul>
  <li>If <code>var/.maintenance.flag</code> does not exist, maintenance mode is off and Magento operates normally.</li>
  <li>
    <p>Otherwise, maintenance mode is on unless <code>var/.maintenance.ip</code> exists:</p>

    <p><code>var/.maintenance.ip</code> can contain a list of IP addresses. If an entry point is accessed using HTTP and the client IP address corresponds to one of the entries in that list, then maintenance mode is off.</p>
  </li>
</ul>

<p>Command usage:</p>

<pre><code>magento maintenance:enable [--ip=&lt;ip address&gt; ... --ip=&lt;ip address&gt;] | [ip=none]
magento maintenance:disable [--ip=&lt;ip address&gt; ... --ip=&lt;ip address&gt;] | [ip=none]
magento maintenance:status
</code></pre>

<p>where</p>

<p><code>--ip=&lt;ip address&gt;</code> is an IP address to exempt from maintenance mode (for example, developers doing the maintenance). To exempt more than one IP address in the same command, use the option multiple times.</p>

<div class="bs-callout bs-callout-info" id="info">
<span class="glyphicon-class">
  <ul><li>Using <code>--ip=&lt;ip address&gt;</code> with <code>magento maintenance:disable</code> means only that you're saving the list of IPs for later use.</li>
  	<li>To clear the list of exempt IPs, you can use <code>magento maintenance:enable --ip=none</code> or see <a href="#instgde-cli-maint-exempt">Maintain the list of exempt IP addresses</a>.</li></ul></span>
</div>

<p><code>magento maintenance:status</code> displays the current status of maintenance mode.</p>

<p>For example, to enable maintenance mode with no IP address exemptions:</p>

<pre><code>magento maintenance:enable
</code></pre>

<p>To enable maintenance mode for all clients except 192.0.2.10 and 192.0.2.11:</p>

<pre><code>magento maintenance:enable --ip=192.0.2.10 --ip=192.0.2.11
</code></pre>

<h2 id="instgde-cli-maint-exempt">Maintain the list of exempt IP addresses</h2>
<p>To maintain the list of exempt IP addresses, you can either use the <code>[--ip=&lt;ip list&gt;]</code> option in the preceding commands or you can use the following:</p>

<pre><code>magento maintenance:allow-ips &lt;ip address&gt; .. &lt;ip address&gt; [--none]
</code></pre>

<p>where </p>

<p><code>&lt;ip address&gt; .. &lt;ip address&gt;</code> is an optional space-delimited list of IP addresses to exempt. </p>

<p><code>--none</code> clears the list.</p>

<h4 id="related-topics">Related topics</h4>

<ul>
  <li><a href="/guides/v2.0/install-gde/install/cli/install-cli-install.html">Installing the Magento software using the command line</a></li>
  <li><a href="/guides/v2.0/install-gde/install/cli/install-cli-subcommands-enable.html">Enable or disable modules</a></li>
  <li><a href="/guides/v2.0/install-gde/install/cli/install-cli-uninstall-mods.html">Uninstall modules</a></li>
  <li><a href="/guides/v2.0/install-gde/install/cli/install-cli-subcommands-deployment.html">Create the deployment configuration</a></li>
  <li><a href="/guides/v2.0/install-gde/install/cli/install-cli-subcommands-db.html">Create the Magento database schema</a></li>
  <li><a href="/guides/v2.0/install-gde/install/cli/install-cli-subcommands-store.html">Configure the store</a></li>
  <li><a href="/guides/v2.0/install-gde/install/cli/install-cli-subcommands-admin.html">Create a Magento administrator</a></li>
  <li><a href="/guides/v2.0/install-gde/install/cli/install-cli-backup.html">Back up the file system, media, and database</a></li>
  <li><a href="/guides/v2.0/install-gde/install/cli/install-cli-theme-uninstall.html">Uninstall themes</a></li>
  <li><a href="/guides/v2.0/install-gde/install/cli/install-cli-uninstall-langpk.html">Uninstall language packages</a></li>
  <li><a href="/guides/v2.0/install-gde/install/cli/install-cli-uninstall.html#instgde-install-uninstall">Uninstall the Magento software</a></li>
  <li><a href="/guides/v2.0/install-gde/install/cli/install-cli-uninstall.html#instgde-install-magento-update">Update the Magento software</a></li>
  <li><a href="/guides/v2.0/install-gde/install/cli/install-cli-uninstall.html#instgde-install-magento-reinstall">Reinstall the Magento software</a></li>
</ul>


		</div>
	</section>
<!-- /main content -->

<!-- sidebar -->
<aside class="sidebar">
	<div class="sidebar-wrapper">
		
 






























<h4>Installation guide</h4>















		<ul role="navigation">
		
		
		
		
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
					
					
					
					
					
					
						
						
						
						
							
														
							
								
								
									<li class=" "><a class="nav-header" href="/guides/v2.0/install-gde/install/cli/install-cli.html">Install the Magento software using the command line</a></li>
									
								
								
								
							
								
								
							
									<li class="level-2 "><a href="/guides/v2.0/install-gde/install/cli/install-cli-subcommands.html">Get started with the command-line installation</a></li>
						
								
							
									<li class="level-2 "><a href="/guides/v2.0/install-gde/install/cli/install-cli-install.html">Install the Magento software using the command line</a></li>
						
								
							
									<li class="level-2 "><a href="/guides/v2.0/install-gde/install/cli/install-cli-adminurl.html">Display or change the Admin URI</a></li>
						
								
							
									<li class="level-2 "><a href="/guides/v2.0/install-gde/install/cli/install-cli-uninstall.html">Update, reinstall, uninstall Magento</a></li>
						
								
							
									<li class="level-2 "><a href="/guides/v2.0/install-gde/install/cli/install-cli-subcommands-enable.html">Enable or disable modules</a></li>
						
								
							
									<li class="level-2 "><a href="/guides/v2.0/install-gde/install/cli/install-cli-uninstall-mods.html">Uninstall modules</a></li>
						
								
							
									<li class="level-2 "><a href="/guides/v2.0/install-gde/install/cli/install-cli-subcommands-deployment.html">Create or update the deployment configuration</a></li>
						
								
							
									<li class="level-2  active "><a href="/guides/v2.0/install-gde/install/cli/install-cli-subcommands-maint.html">Enable or disable maintenance mode</a></li>
						
								
							
									<li class="level-2 "><a href="/guides/v2.0/install-gde/install/cli/install-cli-subcommands-db.html">Create the Magento database schema</a></li>
						
								
							
									<li class="level-2 "><a href="/guides/v2.0/install-gde/install/cli/install-cli-subcommands-store.html">Configure the store</a></li>
						
								
							
									<li class="level-2 "><a href="/guides/v2.0/install-gde/install/cli/install-cli-subcommands-admin.html">Create or unlock a Magento administrator account</a></li>
						
								
							
									<li class="level-2 "><a href="/guides/v2.0/install-gde/install/cli/install-cli-backup.html">Back up and roll back the file system, media, and database</a></li>
						
								
							
									<li class="level-2 "><a href="/guides/v2.0/install-gde/install/cli/install-cli-theme-uninstall.html">Uninstall themes</a></li>
						
								
							
									<li class="level-2 "><a href="/guides/v2.0/install-gde/install/cli/install-cli-uninstall-langpk.html">Uninstall language packages</a></li>
						
								
								
								
							
							
						

					
					
						
						
						
						
							
														
							
								
								
									<li class=" "><a class="nav-header" href="/guides/v2.0/install-gde/continue-to-verify_cli.html">Continue to verify, sample data, or troubleshooting</a></li>
									
								
								
								
							
								
								
								
								
							
							
						

					
					
						
						
						
						
							
														
							
								
								
									<li class=" "><a class="nav-header" href="/guides/v2.0/install-gde/continue-to-cm-updater_cli.html">Continue to upgrading components</a></li>
									
								
								
								
							
								
								
								
								
							
							
						

					


				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
		
		</ul>

	</div>
</aside>
<!-- /sidebar -->


</div> <!-- container -->


		</div>
		</div>
	</div>


</div>
<!-- -->
<!--Global footer-->
<div id="footer-wrap">
<div class="footer">
    <div id="magento-com">
        <div class="intro-paragraph">
            <div class="container">
                <a href="http://www.magento.com/"><img src="/i/logo-gl-footer.png" id="logo" alt="Magento an ebay inc company" /></a>
                <h3>eCommerce platform, solutions and services<br /> to help grow your business.</h3>
            </div>
        </div>
        <div class="container">
            <div id="f-col-1">
                <h4>Learn more</h4>
                <ul class="nav" style="margin-bottom: 40px;">
                    <li><a href="http://magento.com/company/overview" title="Company" >Company</a></li>
                    <li><a href="http://magento.com/company/careers" title="Careers">Careers</a></li>
                    <li><a href="http://www.magentocommerce.com/company/press-releases" title="Press Room">Press Room</a></li>
                </ul>
            </div>
            <div id="f-col-2">
                <div id="social-network">
                    <h4>Find us on</h4>
                    <ul>
                        <li><a class="btn-facebook" target="_blank" href="http://www.facebook.com/magento">Magento Facebook</a>
                        </li>
                        <li><a class="btn-twitter" target="_blank" href="https://twitter.com/magento">Magento Twitter</a></li>
                        <li><a class="btn-lnkdn" target="_blank" href="http://www.linkedin.com/groups?home=&amp;gid=146360&amp;trk=anet_ug_hm">Magento Linkedin</a></li>
                        <li><a class="btn-gplus" target="_blank" href="https://plus.google.com/+magento/posts">Magento Google+</a></li>
                        <li><a class="btn-youtube" target="_blank" href="http://www.youtube.com/user/magentocommerce/featured">Magento
                            Youtube</a></li>
                    </ul>
                </div>
            </div>
            <div id="f-col-3">
                <div id="newsletter">
                    <h4>GET THE LATEST NEWS</h4>
                    <p>See Magento in the news, find press<br/> releases and resources for media.</p>
                    <div class="hold-form">
                        <div id="nws-notsubscribed">
                            <div id="sb-email" class="sb-email">
                                <form method="post" enctype="application/x-www-form-urlencoded"
                                      action="//info2.magento.com/index.php/leadCapture/save" id="mktForm_1182" class="mktform"
                                      name="mktForm_1182" onsubmit="return validateForm();">
                                    <input class="fValidate['email'] input-topbg sb-email-input" name="Email" id="Email"
                                           placeholder="Email Address">
                                    <input type="hidden" name="formid" value="1182" />
                                    <button type="submit" class="sb-icon-submit btn outline">
                                        Submit
                                    </button>
          <span class="sb-icon-email btn outline">
              Sign Up
          </span>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                    <div class="email-invalid hide">
                        <p>Please submit a valid email.</p>
                    </div>
                    <div class="email-ty hide">
                        <p>Thank you for submitting your email.</p>
                    </div>
                </div>
            </div>
            <div id="f-col-4">
                <div class="contact-us">
                    <h4>Get in touch</h4>
                    <p>We'd like to hear from you! Call us, <br />send us an email or talk to sales.</p>
                    <a href="http://magento.com/company/contact-us" class="btn btn-outline">Contact Us</a>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="copyright">
    <div class="container">
        <div class="copyright-links">
            <ul class="nav">
                <li><a title="Privacy Policy" href="http://magento.com/legal/terms/privacy">Privacy Policy</a></li>
                <li><a title="Terms of Service" href="http://magento.com/legal/terms">Terms of Service</a></li>
                <li><a title="License/Trademark FAQ" href="http://magento.com/legal/licensing">License/Trademark
                    FAQ</a></li>
            </ul>
        </div>
        <div class="copyright-date">&copy; 2015 Magento, Inc. All rights reserved.</div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>

<script src="/common/js/jsCookie.js"></script>
<script src="/common/js/devdocs.js"></script>



<script>
devdocs();
</script>


<script src="/js/classie.js"></script>
<script src="/js/uislideform.js"></script>
<script type="text/javascript">
    new UISlideform( document.getElementById( 'sb-email' ), 'email' );
    var newsFlag = window.location.hash.indexOf("newsletter");
    if(newsFlag == 1) {
        jQuery('#Emailemail_msg').fadeOut('slow');
        jQuery('#nws-subscribed').fadeIn('slow');
        jQuery('#sb-email').css('display', 'none');
    }
    else {
        jQuery('#nws-subscribed').fadeOut('slow');
    }
    function validateForm() {
        var x = document.forms["mktForm_1182"]["Email"].value;
        var atpos = x.indexOf("@");
        var dotpos = x.lastIndexOf(".");
        if (atpos < 1 || dotpos < atpos + 2 || dotpos + 2 >= x.length) {
            jQuery('.email-invalid').show();
            return false;
        }
        else {
            jQuery.cookie('mage_drupal_newsletter', 10);
            jQuery('.email-invalid').hide();
            jQuery('.email-ty').show();
            return true;
        }
    }
</script>
<script type="text/javascript">
    (function() {
        var didInit = false;
        function initMunchkin() {
            if(didInit === false) {
                didInit = true;
                Munchkin.init('318-XBX-392', {cookieAnon: false});
            }
        }
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = '//munchkin.marketo.net/munchkin.js';
        s.onreadystatechange = function() {
            if (this.readyState == 'complete' || this.readyState == 'loaded') {
                initMunchkin();
            }
        };
        s.onload = initMunchkin;
        document.getElementsByTagName('head')[0].appendChild(s);
    })();
</script>

<!-- Docs scripts (just in case) -->
<script src="/js/app-min.js"></script>


<!--Google Analytics-->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-66243208-1', 'auto');
    ga('send', 'pageview');
</script>

</body>
</html>