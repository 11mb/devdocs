<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>Entities of the Magento Testing Framework</title>
	<meta name="description" content="Magento 2 Developer's Guide">

	<link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,700,600,300,800' rel='stylesheet' type='text/css'>

	<link rel="stylesheet" href="/css/app.css" />
	<link rel="stylesheet" href="/common/css/override.css" />
	<link rel="canonical" href="//guides/v2.0/mtf/mtf_entities/mtf_handler.html">

<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>

<script>
  (function() {
    var cx = '018116925022773002786:klu67apuihk';
    var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
  })();
</script>


</head>	
<body>

<!--Search Results Overlay -->
<div class="searchOverride"><link rel="stylesheet" href="/common/css/search-override.css" /></div>
<div class="searchResultsBack"></div>
<div id="searchResultsBox">
	<div class="searchResultsBoxClose">Close [x]<!-- <img src="/common/images/close.png" alt="Close"> --></div>

	<gcse:search></gcse:search> 
	<!-- <gcse:searchresults-only></gcse:searchresults-only> -->
</div>
<!--End Search Results Overlay -->

<header id="nav-main" class="nav-main">

	<!--Top Navigation-->
	<nav role="navigation">
		<!-- <div class="menu-btn">
			<a class="menu-trigger menu-icon" href="#"></a>
		</div> -->
			
		<div id="global-nav">
			<div class="main-site-name">
				<a class="logo pull-left" href="/"> </a>
				<div class="sub-site-name">
					<a href="/"><span>Developer Documentation (2.0)</span></a>
				</div>
			</div>
			
			<div class="right-header">
				<!--
				<div class="sales-login">
					<ul class="menu nav">
						<li class="first last leaf"><a href="https://www.magentocommerce.com/products/customer/account/login">My Account</a></li>
					</ul>
				</div>
				
				
				<div class="head-search" id="head-search">
					<div id="sb-search" class="sb-search">
						<form action="http://www.magentocommerce.com/search/results/">
							<span class="sb-icon-search btn btn-search"></span>
							<input name="q" class="sb-search-input" placeholder="Search docs" type="search" style="display: none;" id="search" />
							<span class="sb-search-submit btn btn-search"></span>
						</form>
					</div>
				</div><!-- #head-search --> 
				
			</div>
			
		</div><!-- #global-nav -->
	</nav>

	<!--Sub Navigation-->
<div id="subnav-wrap">
   <div id="subnav">
      <ul class="menu nav">
         <li class="first expanded">
            <a href="/guides/v2.0/bk-get-started-magento.html">Get Started</a>
            <ul class="menu nav">
               <li class="first leaf"><a href="/guides/v2.0/release-notes/bk-release-notes.html">Release Notes</a></li>
               <li class="leaf"><a href="/guides/v2.0/architecture/bk-architecture.html">Magento Architecture</a></li>
            </ul>
         </li>
         <li class="first expanded">
            <a href="/guides/v2.0/install-gde/bk-install-guide.html">System Administrator</a>
            <ul class="menu nav">
               <li class="first leaf"><a href="/guides/v2.0/install-gde/bk-install-guide.html">Installation Guide</a></li>
               <li class="leaf"><a href="/guides/v2.0/comp-mgr/bk-compman-upgrade-guide.html">Component Manager and System Upgrade Guide</a></li>
               <li class="leaf"><a href="/guides/v2.0/config-guide/bk-config-guide.html">Configuration Guide</a></li>
               <li class="leaf"><a href="/guides/v2.0/migration/bk-migration-guide.html">Migration Guide</a></li>
            </ul>
         </li>
         <li class="first expanded">
            <a href="#">Developers</a>
            <ul class="menu nav">
               <li class="first leaf"><a href="/guides/v2.0/frontend-dev-guide/bk-frontend-dev-guide.html">Frontend Developer Guide</a>
               <li class="first leaf"><a href="/guides/v2.0/ui-components/ui-component.html">UI Components</a>
   			   <li class="first leaf"><a href="/guides/v2.0/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript Developer Guide</a>
               <div id="divcentered"><img src="/common/images/horiz-line.png"></div></li>
               <li class="first leaf"><a href="/guides/v2.0/extension-dev-guide/bk-extension-dev-guide.html">PHP Developer Guide</a></li>

               <li class="leaf"><a href="/guides/v2.0/mtf/mtf_introduction.html">Magento Testing Framework Guide</a></li>
               <li class="leaf"><a href="/guides/v2.0/pattern-library/bk-pattern.html">Magento Admin Pattern Library</a></li>
               <div id="divcentered"><img src="/common/images/horiz-line.png"></div></li>
               <li class="first leaf"><a href="/guides/v2.0/get-started/bk-get-started-api.html">Get Started with Magento Web APIs</a></li>
               <li class="leaf"><a href="/guides/v2.0/rest/bk-rest.html">REST API Reference</a></li>
               <li class="leaf"><a href="/guides/v2.0/soap/bk-soap.html">SOAP Reference</a>
               <div id="divcentered"><img src="/common/images/horiz-line.png"></div></li>
               <li class="leaf"><a href="/guides/v2.0/coding-standards/bk-coding-standards.html">Coding Standards</a></li>
            </ul>
         </li>
         
         <li class="first expanded">
            <a href="/guides/v2.0/contributor-guide/contributing.html">Contributor</a>
            <ul class="menu nav">
               <li class="first leaf"><a href="/guides/v2.0/contributor-guide/contributing.html">Contributor Guide</a></li>
            </ul>
         </li>
         <li class="first expanded">
            <a href="/guides/v2.0/howdoi/bk-how-do-i.html">How Do I...?</a>
            
         </li>
         
         
      </ul>

<div class ="search">


<svg class="searchImage" width="20px" height="42px" viewBox="0 0 442 440" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
   
    <title>search</title>
    <desc>It's the search icon</desc>
    <defs></defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">
        <g id="search" sketch:type="MSLayerGroup" transform="translate(24.000000, 24.000000)" stroke="#FFFFFF" stroke-width="47">
            <circle id="lens" sketch:type="MSShapeGroup" cx="145" cy="145" r="145"></circle>
            <path d="M263.351331,261.351331 L371.504623,369.504623" id="handle" stroke-linecap="square" sketch:type="MSShapeGroup"></path>
        </g>
    </g>
</svg>

    <form id="searchbox" name="gs" method="GET" action="#searchResultsBox">
    <input type="hidden" name="cx" value="018116925022773002786:klu67apuihk" />
     <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" id="searchtext" value="" placeholder="Search">
           
                </form>
            </div>  <!-- END searchbox-->


   </div> <!--End subnav -->
</div><!--End subnav-wrap -->

	
</header>	


<div id="gl-wrapper">
	
	<!-- #sidemenu -->
	<div id="sidemenu" style="display:none;">
		<a class="menu-trigger menu-close" href="#" title=""></a>
		<div class="h8 site-title">Our Sites</div>
		<ul class="menu nav">
			<li class="first leaf"><a href="http://magento.com/" title="Magento&#039;s Corporate Site" class="active">Magento</a><span class="description">Magento's Corporate Site</span></li>
			<li class="leaf"><a href="http://enterprise.magento.com" title="Enterprise-Class Platform">Enterprise Edition</a><span class="description">Enterprise-Class Platform</span></li>
			<li class="leaf"><a href="http://go.magento.com/" title="Small Business Storefront">Magento Go</a><span class="description">Small Business Storefront</span></li>
			<li class="leaf"><a href="http://www.magentocommerce.com/magento-connect/" title="Extensions Marketplace">Connect</a><span class="description">Extensions Marketplace</span></li>
			<li class="leaf"><a href="http://magento.com/resources/technical" title="Resources for Developers">Developers</a><span class="description">Resources for Developers</span></li>
			<li class="leaf"><a href="http://magento.com/partners/overview" title="Resources for Partners">Partners</a><span class="description">Resources for Partners</span></li>
			<li class="leaf"><a href="http://magento.com/training/overview" title="Courses and Developer Certification">Training</a><span class="description">Courses and Developer Certification</span></li>
			<li class="last leaf"><a href="http://imagine2015.magento.com/" title="Annual Conference">Imagine</a><span class="description">Annual Conference</span></li>
		</ul>
	</div>
	<!-- /#sidemenu -->
	
	<!-- /.main-container -->
	<div id="gl-container" class="main-container">
		<a id="main-content"></a>
		<div class="pane-content">
			<div class="node node-panel">






<!-- page-header -->
<section class="page-intro">
	<div class="container">
		<h1 class="page-heading">Entities of the Magento Testing Framework</h1>
			
			<a class="improve-page" href="https://github.com/magento/devdocs/tree/develop/guides/v2.0/mtf/mtf_entities/mtf_handler.md" target="_blank">Edit this page on GitHub</a>
		
		
	</div>
</section>

<div class="container">
	<section class="content">
		<div class="content-wrap">
		
		<h2>Handler</h2>

<ul id="markdown-toc">
  <li><a href="#mtf_handler_overview">Handler overview</a></li>
  <li><a href="#mtf_handler_types">Types of handlers</a></li>
  <li><a href="#mtf_handler_config">Configuration</a>    <ul>
      <li><a href="#mtf_handler_configxml"><code>config.xml</code></a></li>
    </ul>
  </li>
  <li><a href="#mtf_handler-components">Handler components</a>    <ul>
      <li><a href="#mtf_handler_interface">Handler interface</a></li>
      <li><a href="#mtf_handler_conf_hand">Handler class</a></li>
      <li><a href="#mtf_handler_di"><code>di.xml</code></a></li>
    </ul>
  </li>
  <li><a href="#mtf_handler_howto-create-curl">How to create a cURL handler</a>    <ul>
      <li><a href="#mtf_handler_decor">cURL authentication classes</a>        <ul>
          <li><a href="#mtf_handler_curl_backdecor">BackendDecorator class</a></li>
          <li><a href="#mtf_handler_cirl_frontdecor">FrontendDecorator class</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#mtf_handler_howto-create-ui">How to create a UI handler</a></li>
  <li><a href="#mtf_handler_howto-create-webapi">How to create a WebAPI handler</a></li>
</ul>

<h2 id="mtf_handler_overview">Handler overview</h2>

<p>You can use a handler to set up preconditions and prepare an initial testing environment for particular tests. For example, your scenario requires a particular widget that must be implicitly created before the test is started. You need <a href="/guides/v2.0/mtf/mtf_entities/mtf_fixture.html">a fixture</a>, a data set, and a handler. The handler transfers data to the application being tested. The data is a list of fields from a fixture and values from data sets.</p>

<p>This topic focuses on handlers, and we’ll discuss types of handlers as well as how to create and use one.</p>

<h2 id="mtf_handler_types">Types of handlers</h2>

<p>The MTF enables you to use any type of handler.</p>

<p>Magento uses the following handlers:</p>

<table>
  <thead>
    <tr>
      <th>Type of handler</th>
      <th>Mechanism</th>
      <th>Example</th>
      <th>Tip</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>UI</td>
      <td>Drives the web browser.</td>
      <td>Set of scripts for Selenium that simulate user actions to create a widget through a web browser.</td>
      <td>The UI handler is much slower then the other handlers. When the test execution time is critical, you should avoid use of the UI handler. The UI handler code is very similar to the code of the test that doesn’t contain constraints. If you have a test for widget creation, you can re-use the code, because the code of UI handler that creates widget is very similar.</td>
    </tr>
    <tr>
      <td>cURL</td>
      <td>Sends POST or PUT requests to the server hosting the application that is being tested.</td>
      <td>HTTP POST request to the application server, that transfers Widget fixture fields and corresponding values from the data set.</td>
      <td>Browser is not involved, that’s why the cURL handler works much faster than the UI handler.</td>
    </tr>
    <tr>
      <td>WebAPI</td>
      <td>Sends a POST request using the REST API. <a href="/guides/v2.0/rest/bk-rest.html">See REST API reference documentation.</a></td>
      <td>Similar to cURL but uses the REST API entry point.</td>
      <td>Has the advantage of testing the API, faster than cURL.</td>
    </tr>
  </tbody>
</table>

<p>Furthermore, you can create your own handlers, such as <strong>Direct</strong>, which is very fast because the <strong>Direct</strong> handler sends a direct call to the Magento application using Magento models. The <strong>Direct</strong> handler requires deep understanding of the Magento application, and also requires access to the Magento code and the database. Difficulties can be caused when the Magento code and Magento tests are run on different hosts.</p>

<h2 id="mtf_handler_config">Configuration</h2>

<p>One fixture can have various handlers. When we create an entity in the test we do not indicate which handler to use. This work is delegated to a fallback, which is a queue of handlers in the priority order specified in <a href="#mtf_handler_configxml"><code>config.xml</code></a>.</p>

<h3 id="mtf_handler_configxml"><code>config.xml</code></h3>

<p>The default configuration for handlers is set in <a href="https://github.com/magento/magento2/tree/2.0.0/dev/tests/functional/etc/config.xml.dist"><code>&lt;magento2&gt;/dev/tests/functional/etc/config.xml.dist</code></a>.  Create a duplicate of the file, and keep both, but make changes to the new one, which is called <code>config.xml</code>:</p>

<pre><code>cp config.xml.dist config.xml
</code></pre>

<p>The following nodes influence handlers:</p>

<table>
<tr><th>Node</th><th>Semantics</th><th>Example</th></tr>
<tr><td><code>&lt;backendLoginUrl&gt;</code></td><td>Reference to the login form of the Admin.</td><td><code>&lt;backendLoginUrl&gt;admin/auth/login&lt;/backendLoginUrl&gt;</code></td></tr>
<tr><td><code>&lt;backendLogin&gt;</code></td><td>A username to access the Admin as a Magento administrator.</td><td><code>&lt;backendLogin&gt;admin&lt;/backendLogin&gt;</code></td></tr>
<tr><td><code>&lt;backendPassword&gt;</code></td><td>A password to access the Admin as a Magento administrator.</td><td><code>&lt;backendPassword&gt;pas$worD&lt;/backendPassword&gt;</code></td></tr>
<tr><td><code>&lt;handler&gt;</code></td><td>Specifies priorities for different types of handler. The less the value, the higher the priority. The highest priority has value <code>0</code>. <code>token</code> contains <a href="/guides/v2.0/get-started/authentication/gs-authentication.html">access token</a> (used by WebAPI handlers only).</td>
<td><pre>
&lt;handler&gt;
  &lt;webapi priority=&quot;0&quot;&gt;
    &lt;token&gt;integration_token&lt;/token&gt;
  &lt;/webapi&gt;
  &lt;curl priority=&quot;1&quot; /&gt;
  &lt;ui priority=&quot;2&quot; /&gt;
&lt;/handler&gt;
</pre>
</td></tr>
</table>

<h2 id="mtf_handler-components">Handler components</h2>

<h3 id="mtf_handler_interface">Handler interface</h3>

<p>Each handler must implement a handler interface.</p>

<p>You should mention in a fixture the <code>handler_interface</code> attribute with a reference to the PHP class: <code>Magento\[module_name]\Test\Handler\[object_name]\[object_name]Interface</code> (example for the Widget: <code>Magento\Widget\Test\Handler\Widget\WidgetInterface</code>).</p>

<p>Example of <code>WidgetInterface.php</code> (should be placed in <code>&lt;magento2&gt;/dev/tests/functional/tests/app/Magento/Widget/Test/Handler/Widget</code>):</p>

<script src="https://gist.github.com/dshevtsov/dbe9b588ffe91bbb5622.js"></script>

<h3 id="mtf_handler_conf_hand">Handler class</h3>

<p>To use the handler class, create <a href="#mtf_handler_interface">an interface</a>, declare a fallback in the <a href="#mtf_handler_config"><code>config.xml</code></a>, and declare interface/class relationships in the <a href="#mtf_handler_di"><code>di.xml</code></a>. When this class is created, you can call the <code>persist()</code> method to create Magento entity (for example, widget). The method returns data that are matched with fixture fields. All fixture fields that are matched are assigned values from the handler.</p>

<p>The <code>persist()</code> method is declared in the <a href="https://github.com/magento/mtf/blob/develop/Magento/Mtf/Fixture/InjectableFixture.php"><code>InjectableFixture</code></a> class by path <code>&lt;magento2&gt;/dev/tests/functional/vendor/magento/mtf/Magento/Mtf/Fixture/InjectableFixture.php</code>.</p>

<script src="https://gist.github.com/dshevtsov/3ed7ce601d3b23e94ccd.js"></script>

<p>Create the handler in the same directory where the interface is stored: <code>&lt;magento2&gt;/dev/tests/functional/tests/app/Magento/[module_name]/Test/Handler/[object_name]/[type_of_handler].php</code></p>

<h3 id="mtf_handler_di"><code>di.xml</code></h3>

<p>The <code>di.xml</code> file declares relationship between the <a href="#mtf_handler_interface">interface</a> and the <a href="#mtf_handler_conf_hand">handler</a> class. The file must be placed in <code>&lt;magento2&gt;/dev/tests/functional/tests/app/Magento/[module_name]/Test/etc/[handler_type]</code>.</p>

<p>See an example for the Widget cURL handler (<code>&lt;magento2&gt;/dev/tests/functional/tests/app/Magento/Widget/Test/etc/curl/di.xml</code>):</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>
<span class="c">&lt;!--</span>
<span class="c">/**</span>
<span class="c"> * Copyright © 2015 Magento. All rights reserved.</span>
<span class="c"> * See COPYING.txt for license details.</span>
<span class="c"> */</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;config</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="na">xsi:noNamespaceSchemaLocation=</span><span class="s">&quot;urn:magento:framework:ObjectManager/etc/config.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;preference</span> <span class="na">for=</span><span class="s">&quot;Magento\Widget\Test\Handler\Widget\WidgetInterface&quot;</span> <span class="na">type=</span><span class="s">&quot;\Magento\Widget\Test\Handler\Widget\Curl&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/config&gt;</span></code></pre></div>

<p>In this example, the <code>di.xml</code> file causes the <code>Curl</code> class to replace the <code>WidgetInterface</code>.</p>

<p>See the directory structure mentioned for the case with the Widget cURL handler:</p>

<p><img src="/common/images/mtf_widget_handler_tree.png" /></p>

<h2 id="mtf_handler_howto-create-curl">How to create a cURL handler</h2>

<p>Let’s create a cURL handler that creates a new widget.</p>

<ul>
  <li>Create a directory with the name <code>Widget</code> in the <code>Handler</code> directory of the Magento_Widget module - <code>&lt;magento2&gt;/dev/tests/functional/tests/app/Magento/Widget/Test/Handler/Widget</code>.</li>
  <li>In the same directory, create <a href="#mtf_handler_interface">the interface</a> for the cURL handler, and call the file <code>WidgetInterface.php</code>. Our new interface extends <code>HandlerInterface</code> class.</li>
</ul>

<script src="https://gist.github.com/dshevtsov/dbe9b588ffe91bbb5622.js"></script>

<ul>
  <li>Create <code>Curl.php</code> in the same directory. This file contains a <a href="#mtf_handler_conf_hand">handler class</a>, which defines preparation of a data to create a new widget.</li>
</ul>

<p>The following code includes detailed comments for better understanding.</p>

<div id="mtf_curl_script">
<script src="https://gist.github.com/dshevtsov/ff1aad2e5f11b76af9fb.js"></script>
</div>

<ul>
  <li>Create <a href="#mtf_handler_di"><code>di.xml</code></a> in the <code>etc/curl</code> directory of the Magento_Widget module.</li>
</ul>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>
<span class="c">&lt;!--</span>
<span class="c">/**</span>
<span class="c"> * Copyright © 2015 Magento. All rights reserved.</span>
<span class="c"> * See COPYING.txt for license details.</span>
<span class="c"> */</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;config</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="na">xsi:noNamespaceSchemaLocation=</span><span class="s">&quot;urn:magento:framework:ObjectManager/etc/config.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;preference</span> <span class="na">for=</span><span class="s">&quot;Magento\Widget\Test\Handler\Widget\WidgetInterface&quot;</span> <span class="na">type=</span><span class="s">&quot;\Magento\Widget\Test\Handler\Widget\Curl&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/config&gt;</span></code></pre></div>

<h3 id="mtf_handler_decor">cURL authentication classes</h3>

<p>In the previously mentioned example of the <a href="#mtf_curl_script">Curl.php</a> code, authentication in the Admin is realized using the <code>BackendDecorator</code> class. </p>

<p>The <a href="#mtf_handler_curl_frontdecor">FrontendDecorator class</a> manages authentication in the storefront.</p>

<h4 id="mtf_handler_curl_backdecor">BackendDecorator class</h4>

<p><code>BackendDecorator</code> manages authentication in Admin and saves the Admin’s session.</p>

<p>Full class name is <code>Mtf\Util\Protocol\CurlTransport\BackendDecorator</code>. </p>

<p>Add to the <code>Curl.php</code> the following code:</p>

<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="x">$curl = new BackendDecorator(new CurlTransport(), new Config());</span></code></pre></div>

<p><code>Config()</code> takes Admin’s configuration from <a href="#mtf_handler_configxml">config.xml</a>, where the username and the password are stored.</p>

<h4 id="mtf_handler_cirl_frontdecor">FrontendDecorator class</h4>

<p><code>FrontendDecorator</code> helps to authorize the customer and saves his session.</p>

<p>Full class name is <code>Mtf\Util\Protocol\CurlTransport\FrontendDecorator</code>.</p>

<p>Use the following code in the <code>Curl.php</code> file:</p>

<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="x">$curl = new FrontendDecorator(new CurlTransport(), $this-&gt;customer);</span></code></pre></div>

<h2 id="mtf_handler_howto-create-ui">How to create a UI handler</h2>

<p>Let’s create a UI handler that creates a new widget.</p>

<ul>
  <li>Create a directory with the name <code>Widget</code> in the <code>Handler</code> directory of the Magento_Widget module - <code>&lt;magento2&gt;/dev/tests/functional/tests/app/Magento/Widget/Test/Handler/Widget</code>.</li>
  <li>In the same directory, create <a href="#mtf_handler_interface">interface</a> for the UI handler, and call the file <code>WidgetInterface.php</code>. Our new interface extends <code>HandlerInterface</code> class.</li>
</ul>

<script src="https://gist.github.com/dshevtsov/dbe9b588ffe91bbb5622.js"></script>

<ul>
  <li>Create <code>Ui.php</code> in the same directory. This file contains a <a href="#mtf_handler_conf_hand">handler class</a>, which defines preparation of a data to create a new widget.</li>
</ul>

<p>The code has detailed comments for better understanding.</p>

<script src="https://gist.github.com/dshevtsov/4c6e021570d80d39694c.js"></script>

<ul>
  <li>Create <a href="#mtf_handler_di"><code>di.xml</code></a> in the <code>etc/ui</code> directory of the Magento_Widget module.</li>
</ul>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>
<span class="c">&lt;!--</span>
<span class="c">/**</span>
<span class="c"> * Copyright © 2015 Magento. All rights reserved.</span>
<span class="c"> * See COPYING.txt for license details.</span>
<span class="c"> */</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;config</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
        <span class="na">xsi:noNamespaceSchemaLocation=</span><span class="s">&quot;urn:magento:framework:ObjectManager/etc/config.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;preference</span> <span class="na">for=</span><span class="s">&quot;Magento\Widget\Test\Handler\Widget\WidgetInterface&quot;</span>
                <span class="na">type=</span><span class="s">&quot;\Magento\Widget\Test\Handler\Widget\Ui&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/config&gt;</span></code></pre></div>

<h2 id="mtf_handler_howto-create-webapi">How to create a WebAPI handler</h2>

<p>Let’s create a WebAPI handler that creates a new tax rule.</p>

<ul>
  <li>Create a directory with the name <code>TaxRule</code> in the <code>Handler</code> directory of the Magento_Tax module - <code>&lt;magento2&gt;/dev/tests/functional/tests/app/Magento/Tax/Test/Handler/TaxRule</code>.</li>
  <li>In the same directory, create <a href="#mtf_handler_interface">interface</a> for the WebAPI handler, and call the file <code>TaxRuleInterface.php</code>. Our new interface extends <code>HandlerInterface</code> class.</li>
</ul>

<script src="https://gist.github.com/dshevtsov/15708f0530aaa70789e0.js"></script>

<ul>
  <li>Create <code>Webapi.php</code> in the same directory. The file contains a <a href="#mtf_handler_conf_hand">handler class</a>. In the following example WebAPI handler uses some cURL handler methods to prepare data. </li>
</ul>

<script src="https://gist.github.com/dshevtsov/e06d8a4241d14738df01.js"></script>

<ul>
  <li>Create <a href="#mtf_handler_di"><code>di.xml</code></a> in the <code>etc/webapi</code> directory of the Magento_Tax module.</li>
</ul>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>
<span class="c">&lt;!--</span>
<span class="c">/**</span>
<span class="c"> * Copyright © 2015 Magento. All rights reserved.</span>
<span class="c"> * See COPYING.txt for license details.</span>
<span class="c"> */</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;config</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
        <span class="na">xsi:noNamespaceSchemaLocation=</span><span class="s">&quot;urn:magento:framework:ObjectManager/etc/config.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;preference</span> <span class="na">for=</span><span class="s">&quot;Magento\Tax\Test\Handler\TaxRule\TaxRuleInterface&quot;</span>
                <span class="na">type=</span><span class="s">&quot;\Magento\Tax\Test\Handler\TaxRule\Webapi&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/config&gt;</span></code></pre></div>


		</div>
	</section>
<!-- /main content -->

<!-- sidebar -->
<aside class="sidebar">
	<div class="sidebar-wrapper">



<h4>Testing framework guide</h4>






		<ul role="navigation">
		
		
		
		
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
				
				
					
					
					
					
					
					
						
						
						
						
							
														
							
								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/mtf/mtf_introduction.html">INTRODUCTION</a></li>
									
								
								
									
							
								
								
								
							
						

					
					
						
						
						
						
							
														
							
								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/mtf/mtf_installation.html">INSTALLATION</a></li>
									
								
								
									
							
								
								
								
							
						

					
					
						
						
						
						
							
														
							
								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/mtf/mtf_quickstart.html">QUICK START</a></li>
									
								
								
									
							
								
								

									
							
									<li class="level-2 "><a href="/guides/v2.0/mtf/mtf_quickstart/mtf_quickstart_config.html">Adjust configuration</a></li>

									
						
								

									
							
									<li class="level-2 "><a href="/guides/v2.0/mtf/mtf_quickstart/mtf_quickstart_environmemt.html">Prepare environment for test run</a></li>

									
						
								

									
							
									<li class="level-2 "><a href="/guides/v2.0/mtf/mtf_quickstart/mtf_quickstart_runtest.html">Test run</a></li>

									
						
								

									
							
									<li class="level-2 "><a href="/guides/v2.0/mtf/mtf_quickstart/mtf_quickstart_logs.html">See logs for failed tests</a></li>

									
						
								
								
							
						

					
					
						
						
						
						
							
														
							
								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/mtf/mtf_entities.html">ENTITIES</a></li>
									
								
								
									
							
								
								

									
							
									<li class="level-2 "><a href="/guides/v2.0/mtf/mtf_entities/mtf_fixture.html">Fixture</a></li>

									
						
								

									
							
									<li class="level-2 "><a href="/guides/v2.0/mtf/mtf_entities/mtf_fixture-repo.html">Fixture Repository</a></li>

									
						
								

									
							
									<li class="level-2  active "><a href="/guides/v2.0/mtf/mtf_entities/mtf_handler.html">Handler</a></li>

									
						
								

									
							
									<li class="level-2 "><a href="/guides/v2.0/mtf/mtf_entities/mtf_block.html">Block</a></li>

									
						
								

									
							
									<li class="level-2 "><a href="/guides/v2.0/mtf/mtf_entities/mtf_typified-element.html">Typified element</a></li>

									
						
								

									
							
									<li class="level-2 "><a href="/guides/v2.0/mtf/mtf_entities/mtf_page.html">Page</a></li>

									
						
								

									
							
									<li class="level-2 "><a href="/guides/v2.0/mtf/mtf_entities/mtf_constraint.html">Constraint</a></li>

									
						
								

									
							
									<li class="level-2 "><a href="/guides/v2.0/mtf/mtf_entities/mtf_dataset.html">Data set</a></li>

									
						
								

									
							
									<li class="level-2 "><a href="/guides/v2.0/mtf/mtf_entities/mtf_testcase.html">Test case</a></li>

									
						
								

									
							
									<li class="level-2 "><a href="/guides/v2.0/mtf/mtf_entities/mtf_scenariotest.html">Scenario test</a></li>

									
						
								
								
							
						

					
					
						
						
						
						
							
														
							
								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/mtf/mtf_update.html">UPDATE</a></li>
									
								
								
									
							
								
								
								
							
						

					
					
						
						
						
						
							
														
							
								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/mtf/mtf_changelog.html">CHANGELOG</a></li>
									
								
								
									
							
								
								
								
							
						

					


				
			
			
				
				
			
			
				
				
			
			
				
				
			
			
		
		</ul>

	</div>
</aside>
<!-- /sidebar -->


</div> <!-- container -->


		</div>
		</div>
	</div>


</div>
<!-- -->
<!--Global footer-->
<div id="footer-wrap">
<div class="footer">
    <div id="magento-com">
        <div class="intro-paragraph">
            <div class="container">
                <a href="http://www.magento.com/"><img src="/i/logo-gl-footer.png" id="logo" alt="Magento an ebay inc company" /></a>
                <h3>eCommerce platform, solutions and services<br /> to help grow your business.</h3>
            </div>
        </div>
        <div class="container">
            <div id="f-col-1">
                <h4>Learn more</h4>
                <ul class="nav" style="margin-bottom: 40px;">
                    <li><a href="http://magento.com/company/about-us" title="Company">Company</a></li>
                    <li><a href="http://magento.com/company/careers" title="Careers">Careers</a></li>
                    <li><a href="http://magento.com/company/press-room" title="Press Room">Press Room</a></li>
                </ul>
            </div>
            <div id="f-col-2">
                <div id="social-network">
                    <h4>Find us on</h4>
                    <ul>
                        <li><a class="btn-facebook" target="_blank" href="http://www.facebook.com/magento">Magento Facebook</a>
                        </li>
                        <li><a class="btn-twitter" target="_blank" href="https://twitter.com/magento">Magento Twitter</a></li>
                        <li><a class="btn-lnkdn" target="_blank" href="http://www.linkedin.com/groups?home=&amp;gid=146360&amp;trk=anet_ug_hm">Magento Linkedin</a></li>
                        <li><a class="btn-gplus" target="_blank" href="https://plus.google.com/+magento/posts">Magento Google+</a></li>
                        <li><a class="btn-youtube" target="_blank" href="http://www.youtube.com/user/magentocommerce/featured">Magento
                            Youtube</a></li>
                    </ul>
                </div>
            </div>
            <div id="f-col-3">
                <div id="newsletter">
                    <h4>GET THE LATEST NEWS</h4>
                    <p>See Magento in the news, find press<br/> releases and resources for media.</p>
                    <div class="hold-form">
                        <div id="nws-notsubscribed">
                            <div id="sb-email" class="sb-email">
                                <form method="post" enctype="application/x-www-form-urlencoded"
                                      action="//info2.magento.com/index.php/leadCapture/save" id="mktForm_1182" class="mktform"
                                      name="mktForm_1182" onsubmit="return validateForm();">
                                    <input class="fValidate['email'] input-topbg sb-email-input" name="Email" id="Email"
                                           placeholder="Email Address">
                                    <input type="hidden" name="formid" value="1182" />
                                    <button type="submit" class="sb-icon-submit btn outline">
                                        Submit
                                    </button>
          <span class="sb-icon-email btn outline">
              Sign Up
          </span>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                    <div class="email-invalid hide">
                        <p>Please submit a valid email.</p>
                    </div>
                    <div class="email-ty hide">
                        <p>Thank you for submitting your email.</p>
                    </div>
                </div>
            </div>
            <div id="f-col-4">
                <div class="contact-us">
                    <h4>Get in touch</h4>
                    <p>We'd like to hear from you! Call us, <br />send us an email or talk to sales.</p>
                    <a href="http://magento.com/company/contact-us" class="btn btn-outline">Contact Us</a>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="copyright">
    <div class="container">
        <div class="copyright-links">
            <ul class="nav">
                <li><a title="Privacy Policy" href="http://magento.com/legal/terms/privacy">Privacy Policy</a></li>
                <li><a title="Terms of Service" href="http://magento.com/legal/terms">Terms of Service</a></li>
                <li><a title="License/Trademark FAQ" href="http://magento.com/legal/licensing">License/Trademark
                    FAQ</a></li>
            </ul>
        </div>
        <div class="copyright-date">&copy; 2015 Magento, Inc. All rights reserved.</div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>

<script src="/common/js/jsCookie.js"></script>
<script src="/common/js/devdocs.js"></script>



<script>
devdocs();
</script>


<script src="/js/classie.js"></script>
<script src="/js/uislideform.js"></script>
<script type="text/javascript">
    new UISlideform( document.getElementById( 'sb-email' ), 'email' );
    var newsFlag = window.location.hash.indexOf("newsletter");
    if(newsFlag == 1) {
        jQuery('#Emailemail_msg').fadeOut('slow');
        jQuery('#nws-subscribed').fadeIn('slow');
        jQuery('#sb-email').css('display', 'none');
    }
    else {
        jQuery('#nws-subscribed').fadeOut('slow');
    }
    function validateForm() {
        var x = document.forms["mktForm_1182"]["Email"].value;
        var atpos = x.indexOf("@");
        var dotpos = x.lastIndexOf(".");
        if (atpos < 1 || dotpos < atpos + 2 || dotpos + 2 >= x.length) {
            jQuery('.email-invalid').show();
            return false;
        }
        else {
            jQuery.cookie('mage_drupal_newsletter', 10);
            jQuery('.email-invalid').hide();
            jQuery('.email-ty').show();
            return true;
        }
    }
</script>
<script type="text/javascript">
    (function() {
        var didInit = false;
        function initMunchkin() {
            if(didInit === false) {
                didInit = true;
                Munchkin.init('318-XBX-392', {cookieAnon: false});
            }
        }
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = '//munchkin.marketo.net/munchkin.js';
        s.onreadystatechange = function() {
            if (this.readyState == 'complete' || this.readyState == 'loaded') {
                initMunchkin();
            }
        };
        s.onload = initMunchkin;
        document.getElementsByTagName('head')[0].appendChild(s);
    })();
</script>

<!-- Docs scripts (just in case) -->
<script src="/js/app-min.js"></script>


<!--Google Analytics-->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-66243208-1', 'auto');
    ga('send', 'pageview');
</script>

</body>
</html>